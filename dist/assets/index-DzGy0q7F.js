(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(a){if(a.ep)return;a.ep=!0;const i=e(a);fetch(a.href,i)}})();var j=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),L="1.1.11";function x(n){var t=document.createElement("table");if(t.classList.add("log-table"),Array.isArray(n)&&n.length>0){var e=document.createElement("tr"),o=Object.keys(n[0]);o.forEach(function(u){var s=document.createElement("th");s.textContent=u,s.classList.add("log-table-header"),e.appendChild(s)}),t.appendChild(e),n.forEach(function(u){var s=document.createElement("tr");o.forEach(function(r){var l=document.createElement("td"),f="";try{f=JSON.stringify(u[r])}catch(h){f="".concat(r,": ").concat(h)}l.textContent=typeof u[r]=="object"?f:u[r],l.classList.add("log-table-cell"),s.appendChild(l)}),t.appendChild(s)})}else if(typeof n=="object"){var a=document.createElement("tr"),i=document.createElement("th");i.textContent="Property",i.classList.add("log-table-header");var c=document.createElement("th");c.textContent="Value",c.classList.add("log-table-header"),a.appendChild(i),a.appendChild(c),t.appendChild(a),Object.keys(n).forEach(function(u){var s=document.createElement("tr"),r=document.createElement("td");r.textContent=u,r.classList.add("log-table-cell");var l=document.createElement("td"),f="";try{f=JSON.stringify(n[u],void 0,4)}catch(h){f="".concat(u,": ").concat(h)}l.textContent=typeof n[u]=="object"?f:n[u],l.classList.add("log-table-cell"),s.appendChild(r),s.appendChild(l),t.appendChild(s)})}return t}function q(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function M(n,t,e){var o=document.querySelector('pre[class*="tree-'.concat(t,'"]'));if(!o)return null;for(var a=o.querySelectorAll("span.highlight-".concat(e)),i=0,c=Array.from(a);i<c.length;i++){var u=c[i];if(typeof n=="string"&&u.textContent===n)return u;if(n instanceof RegExp&&u.textContent!==null&&n.test(u.textContent))return u}return null}function I(){var n=new Date;return n.toTimeString().split(" ")[0]}var E=function(){function n(t){t===void 0&&(t=!1),this.useLogger=t,this.id="logger-".concat(j.nextId())}return n.prototype.addToDocument=function(t,e){t===void 0&&(t=document.body),e===void 0&&(e=this.id);var o=document.getElementById(e);if(o)o.innerHTML="";else{var a=document.createElement("div");a.id=e,a.classList.add("logger","".concat(this.id)),t.appendChild(a)}return this.log("async-monitor.js$".concat(L),"log-info"),!0},n.prototype.appendLogTologger=function(t,e,o){if(t===null&&(t="<null>"),t===void 0&&(t="<undefined>"),!(typeof t=="string"&&t.trim()==="")){var a=document.getElementById(this.id);if(a){var i=document.createElement("div");i.classList.add("log-entry");var c=document.createElement("div");c.classList.add("log-time"),c.textContent=I();var u=document.createElement("div");if(u.classList.add("log-message"),typeof t=="object"){var s=x(t);u.appendChild(s)}else{var r=document.createElement("pre");Array.isArray(e)||(e=[e]),!o&&typeof o=="number"&&e.push("log-group-".concat(o)),e.forEach(function(l){typeof l=="string"&&l.trim()!==""&&r.classList.add(l.trim())}),r.textContent=t,u.appendChild(r)}i.appendChild(c),i.appendChild(u),a.appendChild(i)}}},n.prototype.clear=function(){if(this.useLogger){var t=document.getElementById(this.id);t&&(t.innerHTML=""),this.log("async-monitor.js$".concat(L)),this.log("".concat(this.id))}},n.prototype.log=function(t,e){var o;typeof e=="number"&&(o=e,e=void 0),this.appendLogTologger(t,e||[],o)},n.prototype.warn=function(t,e){this.appendLogTologger(t,"log-warn",e)},n.prototype.error=function(t,e){this.appendLogTologger(t,"log-error",e)},n.prototype.group=function(t,e){this.appendLogTologger("".concat(t),"log-group",e)},n.prototype.table=function(t){this.appendLogTologger(t,"log-table")},n.prototype.highlight=function(t,e,o){o===void 0&&(o="start");var a=document.querySelector('pre[class*="tree-'.concat(e.id,'"]'));if(!a){this.warn("could not highlight tree-".concat(e.id,"."));return}if(Array.isArray(o)||(o=[o]),o.includes("start")){var i=void 0;typeof t=="string"?i=new RegExp(q(t),"gi"):i=new RegExp(t,"g");var c=a.innerHTML.replace(i,function(s){return'<span data-monitor-tree="'.concat(e.id,'" data-monitor-index="').concat(e.index,'" class="highlight-').concat(o.join(" highlight-"),'"><i class="fas fa-stop icon" onclick="interact();"></i>').concat(s,"</span>")});a.innerHTML=c}else{var u=M(t,e.id,"start");u&&(u.classList.remove("highlight-start"),u.classList.add("highlight-".concat(o)))}},n.prototype.clearHighlights=function(t){var e=document.querySelector('pre[class*="tree-'.concat(t,'"]'));e&&e.querySelectorAll("span").forEach(function(o){o.innerText==="completed"||o.classList.contains("highlight-repeat")||(o.outerHTML=o.innerHTML)})},n.prototype.displayRepeat=function(t,e,o){var a=document.querySelector('pre[class*="tree-'.concat(t,'"]'));if(a){var i=a.querySelector('span[class*="highlight-repeat"]');i&&(i.innerText=" ".repeat(1-e.toString().length+o.toString().length)+e.toString().concat("/").concat(o.toString()).concat(" "))}},n}(),F=function(n,t,e,o){function a(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function u(l){try{r(o.next(l))}catch(f){c(f)}}function s(l){try{r(o.throw(l))}catch(f){c(f)}}function r(l){l.done?i(l.value):a(l.value).then(u,s)}r((o=o.apply(n,t||[])).next())})},G=function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},o,a,i,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=u(0),c.throw=u(1),c.return=u(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(r){return function(l){return s([r,l])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c&&(c=0,r[0]&&(e=0)),e;)try{if(o=1,a&&(i=r[0]&2?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[r[0]&2,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return e.label++,{value:r[1],done:!1};case 5:e.label++,a=r[1],r=[0];continue;case 7:r=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(r[0]===6||r[0]===2)){e=0;continue}if(r[0]===3&&(!i||r[1]>i[0]&&r[1]<i[3])){e.label=r[1];break}if(r[0]===6&&e.label<i[1]){e.label=i[1],i=r;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(r);break}i[2]&&e.ops.pop(),e.trys.pop();continue}r=t.call(n,e)}catch(l){r=[6,l],a=0}finally{o=i=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};function _(){return F(this,arguments,void 0,function(n,t){return n===void 0&&(n=Math.random()*3),G(this,function(e){return t===void 0&&(t=n/3<.5),n=n*1e3,[2,new Promise(function(o,a){setTimeout(function(){t?a(n):o(n)},n)})]})})}var W=function(n,t,e,o){function a(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function u(l){try{r(o.next(l))}catch(f){c(f)}}function s(l){try{r(o.throw(l))}catch(f){c(f)}}function r(l){l.done?i(l.value):a(l.value).then(u,s)}r((o=o.apply(n,t||[])).next())})},D=function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},o,a,i,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=u(0),c.throw=u(1),c.return=u(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(r){return function(l){return s([r,l])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c&&(c=0,r[0]&&(e=0)),e;)try{if(o=1,a&&(i=r[0]&2?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[r[0]&2,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return e.label++,{value:r[1],done:!1};case 5:e.label++,a=r[1],r=[0];continue;case 7:r=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(r[0]===6||r[0]===2)){e=0;continue}if(r[0]===3&&(!i||r[1]>i[0]&&r[1]<i[3])){e.label=r[1];break}if(r[0]===6&&e.label<i[1]){e.label=i[1],i=r;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(r);break}i[2]&&e.ops.pop(),e.trys.pop();continue}r=t.call(n,e)}catch(l){r=[6,l],a=0}finally{o=i=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},H=function(){function n(t){this.functions=t}return n.prototype.settled=function(){return W(this,void 0,void 0,function(){var t;return D(this,function(e){switch(e.label){case 0:return[4,Promise.allSettled(this.functions)];case 1:return t=e.sent(),[2,{statusesPromise:t}]}})})},n}(),p=function(){return parseFloat(performance.now().toFixed(0))};function y(n,t){return parseFloat((t-n).toFixed(0))}var $=function(n,t,e,o){function a(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function u(l){try{r(o.next(l))}catch(f){c(f)}}function s(l){try{r(o.throw(l))}catch(f){c(f)}}function r(l){l.done?i(l.value):a(l.value).then(u,s)}r((o=o.apply(n,t||[])).next())})},B=function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},o,a,i,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=u(0),c.throw=u(1),c.return=u(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(r){return function(l){return s([r,l])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c&&(c=0,r[0]&&(e=0)),e;)try{if(o=1,a&&(i=r[0]&2?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[r[0]&2,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return e.label++,{value:r[1],done:!1};case 5:e.label++,a=r[1],r=[0];continue;case 7:r=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(r[0]===6||r[0]===2)){e=0;continue}if(r[0]===3&&(!i||r[1]>i[0]&&r[1]<i[3])){e.label=r[1];break}if(r[0]===6&&e.label<i[1]){e.label=i[1],i=r;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(r);break}i[2]&&e.ops.pop(),e.trys.pop();continue}r=t.call(n,e)}catch(l){r=[6,l],a=0}finally{o=i=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},U=function(){function n(t,e){var o=!1,a=t.map(function(c){return c.promise}),i=new H(a);return i.settled().then(function(c){for(var u=c.statusesPromise,s=0;s<u.length;s++)t[s].promiseStatus.status=u[s].status,t[s].promiseStatus.reason=u[s].status==="rejected"?u[s].reason:void 0,t[s].promiseStatus.value=u[s].status==="fulfilled"?u[s].value:void 0;o=u.some(function(r){return r.status==="rejected"})}).catch(function(c){console.warn("error:",c)}).finally(function(){if(o){var c=t[0];c.group&&typeof c.group.onRejectCallback=="function"&&c.group.onRejectCallback();return}else Array.isArray(e)||(e=[e]),Array.isArray(e)&&e.forEach(function(u){typeof u=="function"&&u()})})}return n}(),w=0;function J(n){return $(this,void 0,void 0,function(){return B(this,function(t){return n.functions.filter(function(e){return e.parent===void 0}).length<1?(n.logger.error("Group must have exactly one root function (aka parent === undefined)!"),[2,new Promise(function(e,o){o()})]):[2,new Promise(function(e,o){k(n,void 0,e,o)})]})})}function k(n,t,e,o){var a=n.functions;n.useLogger;var i=a.filter(function(u){return u.parent===t});if(a.every(function(u){return u.isFinished})){if(n.stopTime=p(),n.options.repeat===0){typeof n.onCompleteCallback=="function"&&n.onCompleteCallback(),e&&e();return}else if(n.options.repeat>0){if(typeof n.onCompleteRunCallback=="function"&&n.onCompleteRunCallback(),n.options.repeat>n.options.runs)return n.options.runs++,n.reset(!1),k(n,void 0,e,o);typeof n.onCompleteCallback=="function"&&n.onCompleteCallback(),e&&e();return}}if(a.some(function(u){return u.isRejected})){n.logger.useLogger&&n.logger.warn("Some watches are rejected."),typeof n.onRejectCallback=="function"&&n.onRejectCallback(),o&&o();return}if(a.some(function(u){return u.isAborted})){n.logger.useLogger&&n.logger.warn("Some watches are aborted."),typeof n.onAbortCallback=="function"&&n.onAbortCallback(),o&&o();return}if(t===void 0){if(i.length===0)return;n.options.repeat>0&&typeof n.onStartRunCallback=="function"&&n.onStartRunCallback(),w=0}if(i.length>0){var c=i.map(function(u){return u.child}).filter(function(u,s,r){return r.indexOf(u)===s});c.forEach(function(u){w++,i.filter(function(s){return s.child===u}).forEach(function(s){if(s.sequence=w,n.logger.highlight(s.name||"g:".concat(n.id,",c:").concat(s.id),{id:n.id,index:s.id},"start"),typeof s.onStartCallback=="function"&&s.onStartCallback(),typeof s.f=="function"){var r=s.f();r==null?n.logger.useLogger&&n.logger.warn("Function returned void"):typeof r.then=="function"?(s.promise=r,s.promise.then(function(){typeof s.onCompleteCallback=="function"&&s.onCompleteCallback(),n.logger.highlight(s.name||"g:".concat(n.id,",c:").concat(s.id),{id:n.id},"complete")}),s.promise.catch(function(){typeof s.onRejectCallback=="function"&&s.onRejectCallback(),n.logger.highlight(s.name||"g:".concat(n.id,",c:").concat(s.id),{id:n.id},"rejected"),n.logger.highlight("completed",{id:n.id},"rejected"),o&&o()})):n.logger.useLogger&&n.logger.warn("Function did not return a promise")}})}),n.isFinished||c.forEach(function(u){var s=i.filter(function(r){return r.child===u}).map(function(r){var l;return r.promise=(l=r.promise)!==null&&l!==void 0?l:Promise.resolve(),r});new U(s,[function(){a.filter(function(r){return r.parent===t}).filter(function(r){return r.child===u}).map(function(r){return r.child}).filter(function(r,l,f){return f.indexOf(r)===l}).forEach(function(r){k(n,r,e,o)})}])})}}var N=function(){function n(t){t===void 0&&(t={});var e;this.map={},this.roots=[],this.consoleLogText="",this.repeatOptions={repeat:0,current:0},this.repeatOptions.repeat=(e=t.repeat)!==null&&e!==void 0?e:0}return n.prototype.buildTree=function(t){var e=this;return t.forEach(function(o){var a=o.parent,i=o.child,c=o.name;if(i!==void 0&&(e.map[i]?c&&!e.map[i].description.includes(c)&&(e.map[i].description+=", ".concat(c)):e.map[i]={name:i,description:c||String(i),children:[]}),a===void 0)i!==void 0&&(e.map[i]||(e.map[i]={name:i,description:c||String(i),children:[]}),e.roots.push(e.map[i]));else if(e.map[a]||(e.map[a]={name:a,description:String(a),children:[]}),i!==void 0){var u=e.map[a].children.find(function(s){return s.name===i});u||e.map[a].children.push(e.map[i])}else e.map[a].children.some(function(s){return s.description===c})||e.map[a].children.push({name:"",description:c||"",children:[]})}),this.roots},n.prototype.collectTerminalNodes=function(t,e){var o=this;return e===void 0&&(e=[]),t.children.length===0&&e.push(t),t.children.forEach(function(a){return o.collectTerminalNodes(a,e)}),e},n.prototype.calculateMaxLength=function(t,e,o,a,i,c){var u=this;e===void 0&&(e=""),o===void 0&&(o=!0),a===void 0&&(a=!0),i===void 0&&(i=!0),c===void 0&&(c={maxLength:0});var s=" ",r="─";this.repeatOptions.repeat!=0&&(s=" │",r=o?a?"┬─":"┼─":"─");var l="".concat(o?"─"+r+"─":s+e+(i&&!o?"└─":"├─")," ").concat(t.description);l.length>c.maxLength&&(c.maxLength=l.length);var f=e+(i?"    ":" │  ");t.children.forEach(function(h,g){var b=g===t.children.length-1;u.calculateMaxLength(h,f,!1,a,b,c)})},n.prototype.displayTreeWithLineLength=function(t,e,o,a,i,c,u,s){var r=this;e===void 0&&(e=""),o===void 0&&(o=!0),a===void 0&&(a=!1),i===void 0&&(i=!0);var l=t.children.length===0,f=" ",h="─",g="";this.repeatOptions.repeat!=0&&(f=" │",h=o?a?"┬─":"┼─":"─");var b="".concat(o?"─"+h+"─":f+e+(i&&!o?"└─":"├─")," ").concat(t.description);if(l){var d=c.current++;g=d===0?"─┐":"─┤";var m=u-(b.length+g.length);m>0&&(b+="─".repeat(m+1)),b+="─"+g,s.value=!0}else{var m=u-b.length;m>0&&(b+=" ".repeat(m+1)),s.value&&(b+="│")}this.consoleLogText+=b.trimEnd()+`\r
`;var v=e+(i?"   ":"│  ");t.children.forEach(function(C,P){var S=P===t.children.length-1;r.displayTreeWithLineLength(C,v,!1,a,S,c,u,s)})},n.prototype.processTree=function(t){var e=this;if(t.length===0)return"<empty tree>";var o=this.buildTree(t),a={maxLength:0};o.forEach(function(r){return e.calculateMaxLength(r,"",!0,!1,!0,a)});var i=[];o.forEach(function(r){return e.collectTerminalNodes(r,i)});var c={current:0,total:i.length},u={value:!1};if(o.forEach(function(r,l){return e.displayTreeWithLineLength(r,"",!0,l===0,!0,c,a.maxLength,u)}),this.repeatOptions.repeat!=0){var s=this.repeatOptions.repeat==-1?" ∞ ":" ".repeat(String(this.repeatOptions.repeat).length)+"1/"+this.repeatOptions.repeat+" ";this.consoleLogText+=" └"+s+"─".repeat(Math.max(1,a.maxLength-s.length-1))+`┤\r
`}return this.consoleLogText+=" ".repeat(a.maxLength+1)+"└─ completed",this.consoleLogText},n}(),R=function(){function n(t,e,o,a,i,c,u,s,r){var l=this,f;this._id=j.nextId(),this._isAborted=!1,this._isFinished=!1,this._isRejected=!1,this._isRunning=!1,this._startTime=0,this._stopTime=0,this._duration=0,this._timeout=0,this.abortController=new AbortController,this.abort=function(d){return l.abortController.abort(d||"manually aborted")},this.signal=this.abortController.signal,this.sequence=0,this.reset=function(){l._isAborted=!1,l._isFinished=!1,l._isRejected=!1,l._isRunning=!1,l._startTime=0,l._stopTime=0,l._duration=0,l.sequence=0,l.abortController=new AbortController,l.signal=l.abortController.signal,l.abort=function(d){return l.abortController.abort(d||"manually aborted")}},this.promiseStatus={status:"not started",reason:void 0,value:void 0};var h=((f=this.group)===null||f===void 0?void 0:f.logger)||new E;typeof t=="object"?(this.f=function(){var d=t.f();return d instanceof Promise?d:Promise.resolve(d)},this.name=t.name,this.parent=t.parent,this.child=t.child,this.onStartCallback=function(){this._isRunning=!0,this._startTime=p(),h.useLogger&&h.log('──"'.concat(this.name,'" has started.')),t.onStartCallback&&t.onStartCallback()},this.onCompleteCallback=function(){this._isFinished=!0,this._isRunning=!1,this._stopTime=p(),this._duration=y(this._startTime,this._stopTime),h.useLogger&&h.log('──"'.concat(this.name,'" has completed.')),t.onCompleteCallback&&t.onCompleteCallback()},this.onRejectCallback=function(){this._isAborted||(this._isRejected=!0,this._isRunning=!1,this._stopTime=p(),this._duration=y(this._startTime,this._stopTime),h.useLogger&&h.warn('──"'.concat(this.name,'" was rejected.')),t.onRejectCallback&&t.onRejectCallback())},this.onAbortCallback=function(){this._isFinished||(this._isAborted||(t.onAbortCallback&&t.onAbortCallback(),this.group.onAbortCallback&&this.group.onAbortCallback()),this._isAborted=!0,this._isRunning=!1,this._stopTime=p(),this._duration=y(this._startTime,this._stopTime),h.useLogger&&h.warn('──"'.concat(this.name,'" was aborted.')))}):(this.f=function(){var d=t();return d instanceof Promise?d:Promise.resolve(d)},this.name=e,this.parent=o,this.child=a,i&&(this.onStartCallback=function(){this._isRunning=!0,this._startTime=p(),h.useLogger&&h.log('"'.concat(this.name,'" has started.')),i()}),c&&(this.onCompleteCallback=function(){this._isFinished=!0,this._isRunning=!1,this._stopTime=p(),this._duration=y(this._startTime,this._stopTime),h.useLogger&&h.log('"'.concat(this.name,'" has completed.')),c()}),u&&(this.onRejectCallback=function(){this._isRejected=!0,this._isRunning=!1,this._stopTime=p(),this._duration=y(this._startTime,this._stopTime),h.useLogger&&h.warn('"'.concat(this.name,'" was rejected.')),u()}),s&&(this.onAbortCallback=function(){this._isFinished||(this._isAborted=!0,this._isRunning=!1,this._stopTime=p(),this._duration=y(this._startTime,this._stopTime),h.useLogger&&h.warn('"'.concat(this.name,'" was aborted d.')),g.onAbortCallback&&g.onAbortCallback())}));var g=this,b=this.f;this.f=function(){return new Promise(function(d,m){g.signal.addEventListener("abort",function(C){g._isRunning&&(g.onAbortCallback&&g.onAbortCallback(),m(C.currentTarget&&C.currentTarget.reason||"manually aborted."))}),l.timeout>0&&setTimeout(function(){g._isRunning&&(h.error('"'.concat(g.name,'" has timed out.')),g.abort("function timeout"))},l.timeout);var v=b();v instanceof Promise?v.then(d).catch(m):d(v)})}}return Object.defineProperty(n.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAborted",{get:function(){return this._isAborted},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isFinished",{get:function(){return this._isFinished},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRejected",{get:function(){return this._isRejected},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isProcessed",{get:function(){return this._isFinished||this._isRejected||this._isAborted},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"startTime",{get:function(){return this._startTime},set:function(t){this._startTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stopTime",{get:function(){return this._stopTime},set:function(t){this._stopTime=t,this._duration=y(this._startTime,this._stopTime)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){return Math.min(0,this._duration)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeout",{get:function(){return this._timeout},set:function(t){this._timeout=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metrics",{get:function(){return{id:this._id,name:this.name||"",start:Math.max(0,this.group?this._startTime-this.group.startTime:0),duration:this._duration,status:this.promiseStatus.status,value:this.promiseStatus.value,reason:this.promiseStatus.reason,isRunning:this._isRunning,isFinished:this._isFinished,isRejected:this._isRejected,isAborted:this._isAborted,sequence:this.sequence}},enumerable:!1,configurable:!0}),n}(),T=function(){return T=Object.assign||function(n){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},T.apply(this,arguments)},z=function(n){var t=n.toString().length;return new RegExp("\\s{".concat(t,"}1\\/").concat(n,"\\s"))},A=function(){function n(t){t===void 0&&(t={repeat:0});var e=this;this.options={repeat:0,runs:0},this._id=j.nextId(),this._functions=[],this._startTime=0,this._stopTime=0,this._duration=0,this._timeout=0,this._onStartCallback=function(){},this._onStartRunCallback=function(){},this._onCompleteCallback=function(){},this._onCompleteRunCallback=function(){},this._onRejectCallback=function(){},this._onRejectRunCallback=function(){},this._onAbortCallback=function(){},this._onAbortRunCallback=function(){},this.sequence=0,this._onErrorCallback=function(){},this.addWatch=function(o){var a;typeof o=="function"?(a=new R({f:o,name:"watch-function-".concat(e.sequence+1),parent:e.sequence===0?void 0:"_monitor_".concat(e.sequence),child:"_monitor_".concat(e.sequence+1),onStartCallback:function(){},onCompleteCallback:function(){},onRejectCallback:function(){},onAbortCallback:function(){}}),e.sequence++):a=new R(o),a.group=e,e._functions.push(a)},this.options=T(T({},t),{runs:0}),this.logger=new E,O.push(this)}return Object.defineProperty(n.prototype,"run",{get:function(){return this.options.repeat>=0?this.options.runs:0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"useLogger",{get:function(){return this.logger.useLogger},set:function(t){this.logger.useLogger=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"functions",{get:function(){return this._functions},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRunning",{get:function(){return this._functions.some(function(t){return t.isRunning})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isFinished",{get:function(){return this._functions.every(function(t){return t.isFinished})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRejected",{get:function(){return this._functions.some(function(t){return t.isRejected})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAborted",{get:function(){return this._functions.some(function(t){return t.isAborted})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isProcessed",{get:function(){return this.isFinished||this.isRejected||this.isAborted},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"startTime",{get:function(){return this._startTime},set:function(t){this._startTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stopTime",{get:function(){return this._stopTime},set:function(t){this._stopTime=t,this._duration=y(this._startTime,this._stopTime)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){return Math.min(0,this._duration)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeout",{get:function(){return this._timeout},set:function(t){this._timeout=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onStartCallback",{get:function(){var t=this;return function(){var e;t.startTime=p(),t.options.repeat>0&&(t.options.runs=1),t.useLogger&&t.logger.log('*** START "'.concat((e=t.name)!==null&&e!==void 0?e:"Group#"+t.id,'" ***')),t.logger.highlight("completed",{id:t._id},"start"),t.logger.highlight(z(t.options.repeat),{id:t._id},["start","repeat"]),t._onStartCallback()}},set:function(t){typeof t=="function"&&(this._onStartCallback=t.bind(this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onStartRunCallback",{get:function(){var t=this;return function(){t.isRunning||(t.useLogger&&t.logger.log('*** RUN "'.concat(t.run,'" STARTED ***')),t._onStartRunCallback())}},set:function(t){typeof t=="function"&&(this._onStartRunCallback=t.bind(this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onCompleteCallback",{get:function(){var t=this;return function(){var e;t._onCompleteCallback(),t.stopTime=p(),t.useLogger&&t.logger.log('*** COMPLETED "'.concat((e=t.name)!==null&&e!==void 0?e:"Group#"+t.id,'" ***')),t.logger.highlight("completed",{id:t._id},"complete"),t.logger.highlight(" "+t.options.repeat+"/"+t.options.repeat+" ",{id:t._id},["complete"])}},set:function(t){typeof t=="function"&&(this._onCompleteCallback=t.bind(this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onCompleteRunCallback",{get:function(){var t=this;return function(){t.useLogger&&t.logger.log('*** RUN "'.concat(t.run,'" COMPLETED ***')),t._onCompleteRunCallback()}},set:function(t){typeof t=="function"&&(this._onCompleteRunCallback=t.bind(this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onRejectCallback",{get:function(){var t=this;return function(){var e,o;t.stopTime=p(),t.useLogger&&(t.logger.log('*** REJECTED "'.concat((e=t.name)!==null&&e!==void 0?e:"Group#"+t.id,'" ***')),t.logger.log(t.metrics)),t.logger.highlight("completed",{id:t._id,index:t.sequence},"complete"),(o=t._onRejectCallback)===null||o===void 0||o.call(t)}},set:function(t){typeof t=="function"&&(this._onRejectCallback=t.bind(this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onRejectRunCallback",{get:function(){var t=this;return function(){var e;t.stopTime=p(),t.useLogger&&(t.logger.log('*** REJECTED RUN "'.concat(t.run,'" ***')),t.logger.log(t.metrics)),t.logger.highlight("completed",{id:t._id,index:t.sequence},"complete"),(e=t._onRejectRunCallback)===null||e===void 0||e.call(t)}},set:function(t){typeof t=="function"&&(this._onRejectRunCallback=t.bind(this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onAbortCallback",{get:function(){var t=this;return function(){var e;t.stopTime=p(),!t.isAborted&&(t.useLogger&&t.logger.log('*** ABORTED GROUP "'.concat((e=t.name)!==null&&e!==void 0?e:"Group#"+t.id,'" ***')),t.logger.highlight("completed",{id:t._id},"aborted"),typeof t._onAbortCallback=="function"&&t._onAbortCallback())}},set:function(t){typeof t=="function"&&(this._onAbortCallback=t.bind(this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onAbortRunCallback",{get:function(){var t=this;return function(){var e;t.stopTime=p(),t.useLogger&&t.logger.log('*** ABORTED RUN "'.concat(t.run,'" ***')),t.logger.highlight("completed",{id:t._id},"aborted"),(e=t._onAbortRunCallback)===null||e===void 0||e.call(t)}},set:function(t){typeof t=="function"&&(this._onAbortRunCallback=t.bind(this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onErrorCallback",{get:function(){var t=this;return function(){t.useLogger&&t.logger.log('*** ERROR in group "'.concat(t.name||t._id,'" ***')),t._onErrorCallback()}},set:function(t){typeof t=="function"&&(this._onErrorCallback=t)},enumerable:!1,configurable:!0}),n.prototype.abortWatch=function(t){var e=this._functions.find(function(o){return o.name===t});e?e.abort("manual aborted by user"):this.logger.useLogger&&this.logger.warn('+++ No watch function found with name "'.concat(t,'"'))},n.prototype.abort=function(t){t===void 0&&(t="all functions aborted by user"),this._functions.forEach(function(e){e.abort(t)})},n.prototype.reset=function(t){t===void 0&&(t=!0),this.startTime=0,this.stopTime=0,this._functions.forEach(function(e){return e.reset()}),t&&(this.options.runs=1),this.logger.displayRepeat(this._id,this.options.runs||0,this.options.repeat),this.logger.clearHighlights(this._id)},n.prototype.removeAll=function(){this._functions=[]},n.prototype.add=function(){},n.prototype.remove=function(){},n.prototype.watchAll=function(){var t=this;return this.logger.addToDocument()&&this.logger.log(this.loggerTree,["tree","tree-".concat(this.id)]),this.timeout>0&&setTimeout(function(){t.logger.warn("timeout on group"),t.abort("timeout on group")},this.timeout),this.functions.length===0?(this.logger.useLogger&&this.logger.warn("No watch functions found in this group."),new Promise(function(e,o){o("No watch functions found in this group.")})):this.isProcessed?(this.logger.useLogger&&this.logger.warn("This watchAll group has already been processed."),new Promise(function(e,o){o("This watchAll group has already been processed.")})):this.isRunning?(this.logger.useLogger&&this.logger.warn("This watchAll group is already being monitored."),new Promise(function(e,o){o("This watchAll group is already being monitored.")})):(this.startTime=p(),typeof this.onStartCallback=="function"&&this.onStartCallback(),J(this))},Object.defineProperty(n.prototype,"loggerTree",{get:function(){var t=this._functions.map(function(o){return{name:o.name,parent:o.parent,child:o.child}}),e=new N({repeat:this.options.repeat});return e.processTree(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metrics",{get:function(){return this._functions.map(function(t){return t.metrics})},enumerable:!1,configurable:!0}),n}(),O=[];window.asyncMonitor=O;function Q(){const n=new A;n.addWatch(()=>_(5,!1)),n.addWatch(()=>_(void 0,!1)),n.addWatch(()=>_(void 0,!1)),n.watchAll().then(()=>{n.logger.log("watchGroup done")});const t=new A;t.addWatch(()=>_(5,!1)),t.addWatch(()=>_(void 0,!1)),t.addWatch(()=>_(void 0,!1)),t.watchAll().then(()=>{t.logger.log("watchGroup2 done")})}document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("app");n&&(n.innerHTML="<h1>Hello, TypeScript Web App!</h1>")});Q();
